datasource postgresql {
  url      = env("DATABASE_URL")
  provider = "postgresql"
}

generator client {
  provider = "prisma-client-js"
  output   = "node_modules/.prisma/client"
}

model User {
  id       String   @id @default(cuid())
  name     String?  @unique
  email    String?  @unique
  password String?
  account  Account? @relation("Account_user")
}

model Account {
  id        String  @id @default(cuid())
  firstName String?
  lastName  String?
  phone     String? @unique
  address1  String?
  address2  String?
  city      String?
  state     State?  @relation("Account_state", fields: [stateId], references: [id])
  stateId   String? @map("state")
  zip       Int?
  user      User?   @relation("Account_user", fields: [userId], references: [id])
  userId    String? @unique @map("user")

  @@index([stateId])
}

model Tag {
  id        String     @id @default(cuid())
  name      String?
  locations Location[] @relation("Location_tags_Tag_locations")
}

model Location {
  id               String    @id @default(cuid())
  name             String?
  shortDescription String?
  state            State?    @relation("Location_state", fields: [stateId], references: [id])
  stateId          String?   @map("state")
  city             City?     @relation("Location_city", fields: [cityId], references: [id])
  cityId           String?   @map("city")
  status           String?
  description      Json?
  createdDate      DateTime?
  tags             Tag[]     @relation("Location_tags_Tag_locations")
  images           Image[]   @relation("Image_locations_Location_images")

  @@index([stateId])
  @@index([cityId])
}

model FipsGeo {
  id                  String             @id @default(cuid())
  areaName            String?
  summaryLevel        String?
  state               State?             @relation("FipsGeo_state", fields: [stateId], references: [id])
  stateId             String?            @map("state")
  county              County?            @relation("FipsGeo_county", fields: [countyId], references: [id])
  countyId            String?            @map("county")
  countySubdivision   CountySubdivision? @relation("FipsGeo_countySubdivision", fields: [countySubdivisionId], references: [id])
  countySubdivisionId String?            @map("countySubdivision")
  city                City?              @relation("FipsGeo_city", fields: [cityId], references: [id])
  cityId              String?            @map("city")
  consolidatedCity    String?

  @@index([stateId])
  @@index([countyId])
  @@index([countySubdivisionId])
  @@index([cityId])
}

model State {
  id                 String              @id @default(cuid())
  code               String?             @unique
  fipsCode           String?             @unique
  name               String?             @unique
  capital            String?
  largestCity        String?
  population         Int?
  areaSqMi           Int?
  landAreaSqMi       Int?
  waterAreaSqMi      Int?
  locations          Location[]          @relation("Location_state")
  fipsGeo            FipsGeo[]           @relation("FipsGeo_state")
  county             County[]            @relation("County_state")
  countySubdivision  CountySubdivision[] @relation("CountySubdivision_state")
  city               City[]              @relation("City_state")
  from_Account_state Account[]           @relation("Account_state")
}

model County {
  id                String              @id @default(cuid())
  fipsCode          String?
  name              String?
  type              String?
  state             State?              @relation("County_state", fields: [stateId], references: [id])
  stateId           String?             @map("state")
  countySubdivision CountySubdivision[] @relation("CountySubdivision_county")
  fipsGeo           FipsGeo[]           @relation("FipsGeo_county")

  @@index([stateId])
}

model CountySubdivision {
  id       String    @id @default(cuid())
  fipsCode String?
  name     String?
  county   County?   @relation("CountySubdivision_county", fields: [countyId], references: [id])
  countyId String?   @map("county")
  state    State?    @relation("CountySubdivision_state", fields: [stateId], references: [id])
  stateId  String?   @map("state")
  fipsGeo  FipsGeo[] @relation("FipsGeo_countySubdivision")

  @@index([countyId])
  @@index([stateId])
}

model City {
  id        String     @id @default(cuid())
  fipsCode  String?
  name      String?
  cbsa      String?
  necta     String?
  state     State?     @relation("City_state", fields: [stateId], references: [id])
  stateId   String?    @map("state")
  locations Location[] @relation("Location_city")
  fipsGeo   FipsGeo[]  @relation("FipsGeo_city")

  @@index([stateId])
}

model Image {
  id        String     @id @default(cuid())
  filename  String?
  locations Location[] @relation("Image_locations_Location_images")
}

model ContentBlock {
  id         String   @id @default(cuid())
  active     Boolean?
  page       String?
  column     Int?
  blockOrder Int?
  richText   Json?
}